
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://example.enerzai.com/optimav2/guide/inference/">
      
      
        <link rel="prev" href="../convert/">
      
      
        <link rel="next" href="../../kernel/Tutorial/HowToRead/">
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.4.2, mkdocs-material-9.1.1">
    
    
      
        <title>Inference - OptimaV2 Document</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.402914a4.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.a0c5b2b5.min.css">
      
      

    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="" data-md-color-accent="">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#run-the-model-from-optimav2" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="OptimaV2 Document" class="md-header__button md-logo" aria-label="OptimaV2 Document" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            OptimaV2 Document
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Inference
            
          </span>
        </div>
      </div>
    </div>
    
    
    
    
      <div class="md-header__source">
        <a href="https://github.com/ENERZAi/OptimaV2-Docs" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.3.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="OptimaV2 Document" class="md-nav__button md-logo" aria-label="OptimaV2 Document" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    OptimaV2 Document
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/ENERZAi/OptimaV2-Docs" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.3.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        Home
      </a>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" checked>
      
      
      
        <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
          User Guide
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="true">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          User Guide
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../install/" class="md-nav__link">
        Install
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../convert/" class="md-nav__link">
        Convert
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Inference
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Inference
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#install-requirements" class="md-nav__link">
    Install requirements
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#import-the-runtime" class="md-nav__link">
    Import the runtime
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#create-the-context" class="md-nav__link">
    Create the context
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#load-the-model" class="md-nav__link">
    Load the model
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#create-the-request" class="md-nav__link">
    Create the request
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#set-input-tensors" class="md-nav__link">
    Set input tensors
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#run-inference" class="md-nav__link">
    Run inference
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#get-output-tensors" class="md-nav__link">
    Get output tensors
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#get-profile-data" class="md-nav__link">
    Get profile data
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
      
      
      
        <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
          Opto Language
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          Opto Language
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_1" >
      
      
      
        <label class="md-nav__link" for="__nav_3_1" id="__nav_3_1_label" tabindex="0">
          Tutorial
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_1_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_3_1">
          <span class="md-nav__icon md-icon"></span>
          Tutorial
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../kernel/Tutorial/HowToRead/" class="md-nav__link">
        How to read this tutorial
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../kernel/Tutorial/Chapter1/" class="md-nav__link">
        Chapter1
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../kernel/Tutorial/Chapter2/" class="md-nav__link">
        Chapter2
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../kernel/Tutorial/Chapter3/" class="md-nav__link">
        Chapter3
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../kernel/Tutorial/Chapter4/" class="md-nav__link">
        Chapter4
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../kernel/Tutorial/Chapter5/" class="md-nav__link">
        Chapter5
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../kernel/Tutorial/Chapter6/" class="md-nav__link">
        Chapter6
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../kernel/Tutorial/Chapter7/" class="md-nav__link">
        Chapter7
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
      
      
      
        <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
          Runtime API Reference
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          Runtime API Reference
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_1" >
      
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../runtime/cpp/">C++</a>
          
            <label for="__nav_4_1">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_1_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_4_1">
          <span class="md-nav__icon md-icon"></span>
          C++
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_1_1" >
      
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../runtime/cpp/classes/">Classes</a>
          
            <label for="__nav_4_1_1">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_4_1_1_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_4_1_1">
          <span class="md-nav__icon md-icon"></span>
          Classes
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../runtime/cpp/classes/buffer_holder/" class="md-nav__link">
        BufferHolder
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../runtime/cpp/classes/context/" class="md-nav__link">
        Context
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../runtime/cpp/classes/infer_request/" class="md-nav__link">
        InferRequest
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../runtime/cpp/classes/model/" class="md-nav__link">
        Model
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../runtime/cpp/classes/shape/" class="md-nav__link">
        Shape
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../runtime/cpp/classes/tensor/" class="md-nav__link">
        Tensor
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_1_2" >
      
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../runtime/cpp/enums/">Enumerations</a>
          
            <label for="__nav_4_1_2">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_4_1_2_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_4_1_2">
          <span class="md-nav__icon md-icon"></span>
          Enumerations
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../runtime/cpp/enums/device_kind/" class="md-nav__link">
        DeviceKind
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../runtime/cpp/enums/element_type/" class="md-nav__link">
        ElementType
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../runtime/cpp/enums/framework_kind/" class="md-nav__link">
        FrameworkKind
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../runtime/cpp/enums/log_level/" class="md-nav__link">
        LogLevel
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../runtime/cpp/enums/profile_kind/" class="md-nav__link">
        ProfileKind
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_1_3" >
      
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../runtime/cpp/exceptions/">Exceptions</a>
          
            <label for="__nav_4_1_3">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_4_1_3_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_4_1_3">
          <span class="md-nav__icon md-icon"></span>
          Exceptions
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../runtime/cpp/exceptions/exception/" class="md-nav__link">
        Exception
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../runtime/cpp/exceptions/backend/" class="md-nav__link">
        BackendException
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../runtime/cpp/exceptions/infer/" class="md-nav__link">
        InferException
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../runtime/cpp/exceptions/initialization_failed/" class="md-nav__link">
        InitalizationFailedException
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../runtime/cpp/exceptions/invalid_argument/" class="md-nav__link">
        InvalidArgumentException
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../runtime/cpp/exceptions/invalid_extension/" class="md-nav__link">
        InvalidExtensionException
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../runtime/cpp/exceptions/invalid_model/" class="md-nav__link">
        InvalidModelException
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../runtime/cpp/exceptions/invalid_operation/" class="md-nav__link">
        InvalidOperationException
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../runtime/cpp/exceptions/out_of_resource/" class="md-nav__link">
        OutOfResourceException
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../runtime/cpp/exceptions/unsupported_model/" class="md-nav__link">
        UnsupportedModelException
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_1_4" >
      
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../runtime/cpp/functions/">Functions</a>
          
            <label for="__nav_4_1_4">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_4_1_4_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_4_1_4">
          <span class="md-nav__icon md-icon"></span>
          Functions
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../runtime/cpp/functions/enumerate/" class="md-nav__link">
        enumerate
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../runtime/cpp/functions/get_cause/" class="md-nav__link">
        getCause
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../runtime/cpp/functions/get_size_of_element/" class="md-nav__link">
        getSizeOfElement
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../runtime/cpp/functions/is_device_cpu/" class="md-nav__link">
        isDeviceCPU
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../runtime/cpp/functions/is_device_gpu/" class="md-nav__link">
        isDeviceGPU
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../runtime/cpp/functions/is_device_npu/" class="md-nav__link">
        isDeviceNPU
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../runtime/cpp/functions/range/" class="md-nav__link">
        range
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../runtime/cpp/functions/throw_format/" class="md-nav__link">
        throwFormat
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../runtime/cpp/functions/to_string/" class="md-nav__link">
        toString
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_1_5" >
      
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../runtime/cpp/structs/">Structures</a>
          
            <label for="__nav_4_1_5">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_4_1_5_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_4_1_5">
          <span class="md-nav__icon md-icon"></span>
          Structures
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../runtime/cpp/structs/context_options/" class="md-nav__link">
        ContextOptions
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../runtime/cpp/structs/device_info/" class="md-nav__link">
        DeviceInfo
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../runtime/cpp/structs/profile_data/" class="md-nav__link">
        ProfileData
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../runtime/cpp/structs/tensor_info/" class="md-nav__link">
        TensorInfo
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_1_6" >
      
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../runtime/cpp/typedefs/">Typedefs</a>
          
            <label for="__nav_4_1_6">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_4_1_6_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_4_1_6">
          <span class="md-nav__icon md-icon"></span>
          Typedefs
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../runtime/cpp/typedefs/infer_request_callback/" class="md-nav__link">
        InferRequestCallback
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../runtime/cpp/typedefs/version_tuple/" class="md-nav__link">
        VersionTuple
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_2" >
      
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../runtime/python/">Python</a>
          
            <label for="__nav_4_2">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_2_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_4_2">
          <span class="md-nav__icon md-icon"></span>
          Python
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_2_1" >
      
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../runtime/python/classes/">Classes</a>
          
            <label for="__nav_4_2_1">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_4_2_1_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_4_2_1">
          <span class="md-nav__icon md-icon"></span>
          Classes
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../runtime/python/classes/context/" class="md-nav__link">
        Context
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../runtime/python/classes/device_info/" class="md-nav__link">
        DeviceInfo
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../runtime/python/classes/infer_request/" class="md-nav__link">
        InferRequest
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../runtime/python/classes/model/" class="md-nav__link">
        Model
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../runtime/python/classes/profile_data/" class="md-nav__link">
        ProfileData
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../runtime/python/classes/tensor/" class="md-nav__link">
        Tensor
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../runtime/python/classes/tensor_info/" class="md-nav__link">
        TensorInfo
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_2_2" >
      
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../runtime/python/enums/">Enumerations</a>
          
            <label for="__nav_4_2_2">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_4_2_2_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_4_2_2">
          <span class="md-nav__icon md-icon"></span>
          Enumerations
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../runtime/python/enums/device_kind/" class="md-nav__link">
        DeviceKind
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../runtime/python/enums/element_type/" class="md-nav__link">
        ElementType
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../runtime/python/enums/framework_kind/" class="md-nav__link">
        FrameworkKind
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../runtime/python/enums/log_level/" class="md-nav__link">
        LogLevel
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../runtime/python/enums/profile_kind/" class="md-nav__link">
        ProfileKind
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_2_3" >
      
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../runtime/python/exceptions/">Exceptions</a>
          
            <label for="__nav_4_2_3">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_4_2_3_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_4_2_3">
          <span class="md-nav__icon md-icon"></span>
          Exceptions
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../runtime/python/exceptions/exception/" class="md-nav__link">
        Exception
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../runtime/python/exceptions/backend/" class="md-nav__link">
        BackendException
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../runtime/python/exceptions/infer/" class="md-nav__link">
        InferException
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../runtime/python/exceptions/initialization_failed/" class="md-nav__link">
        InitalizationFailedException
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../runtime/python/exceptions/invalid_argument/" class="md-nav__link">
        InvalidArgumentException
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../runtime/python/exceptions/invalid_extension/" class="md-nav__link">
        InvalidExtensionException
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../runtime/python/exceptions/invalid_model/" class="md-nav__link">
        InvalidModelException
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../runtime/python/exceptions/invalid_operation/" class="md-nav__link">
        InvalidOperationException
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../runtime/python/exceptions/out_of_resource/" class="md-nav__link">
        OutOfResourceException
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../runtime/python/exceptions/unsupported_model/" class="md-nav__link">
        UnsupportedModelException
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_2_4" >
      
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../runtime/python/functions/">Functions</a>
          
            <label for="__nav_4_2_4">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_4_2_4_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_4_2_4">
          <span class="md-nav__icon md-icon"></span>
          Functions
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../runtime/python/functions/get_element_size/" class="md-nav__link">
        get_element_size
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../runtime/python/functions/is_device_cpu/" class="md-nav__link">
        is_device_cpu
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../runtime/python/functions/is_device_gpu/" class="md-nav__link">
        is_device_gpu
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../runtime/python/functions/is_device_npu/" class="md-nav__link">
        is_device_npu
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
      
      
      
        <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
          Misc
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_5">
          <span class="md-nav__icon md-icon"></span>
          Misc
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../runtime/cross_build/" class="md-nav__link">
        Cross Compile The Runtime
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#install-requirements" class="md-nav__link">
    Install requirements
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#import-the-runtime" class="md-nav__link">
    Import the runtime
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#create-the-context" class="md-nav__link">
    Create the context
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#load-the-model" class="md-nav__link">
    Load the model
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#create-the-request" class="md-nav__link">
    Create the request
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#set-input-tensors" class="md-nav__link">
    Set input tensors
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#run-inference" class="md-nav__link">
    Run inference
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#get-output-tensors" class="md-nav__link">
    Get output tensors
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#get-profile-data" class="md-nav__link">
    Get profile data
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  


<h1 id="run-the-model-from-optimav2">Run the model from OptimaV2<a class="headerlink" href="#run-the-model-from-optimav2" title="Permanent link">&para;</a></h1>
<h2 id="install-requirements">Install requirements<a class="headerlink" href="#install-requirements" title="Permanent link">&para;</a></h2>
<p>To install requirements for running OptimaV2 Runtime, please refer <a href="../install/#installing-optimav2-runtime">here</a>.</p>
<h2 id="import-the-runtime">Import the runtime<a class="headerlink" href="#import-the-runtime" title="Permanent link">&para;</a></h2>
<div class="tabbed-set tabbed-alternate" data-tabs="1:2"><input checked="checked" id="__tabbed_1_1" name="__tabbed_1" type="radio" /><input id="__tabbed_1_2" name="__tabbed_1" type="radio" /><div class="tabbed-labels"><label for="__tabbed_1_1">C++</label><label for="__tabbed_1_2">Python</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p>Create a folder with preferred name and add a file named <code>Sample.cpp</code> in the folder.</p>
<p>Add code below in <code>Sample.cpp</code>.
<div class="highlight"><pre><span></span><code><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;OptimaV2/Runtime.h&gt;</span>

<span class="k">namespace</span><span class="w"> </span><span class="nn">rt</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nn">optima_v2</span><span class="o">::</span><span class="nn">runtime</span><span class="p">;</span>

<span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">argc</span><span class="p">,</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="o">**</span><span class="n">argv</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// TODO: Write your own code</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></p>
<p>Create file named <code>CMakeLists.txt</code> in same folder and add code:
<div class="highlight"><pre><span></span><code><span class="c"># If you installed the runtime at non-common path, uncomment code below.</span>
<span class="c"># list(INSERT 0 CMAKE_PREFIX_PATH &quot;&lt;runtime installed path&gt;&quot;)</span>
<span class="nb">find_package</span><span class="p">(</span><span class="s">OptimaV2-Runtime</span><span class="w"> </span><span class="s">REQUIRED</span><span class="p">)</span>
<span class="nb">add_executable</span><span class="p">(</span><span class="s">Sample</span><span class="w"> </span><span class="s">Sample.cpp</span><span class="p">)</span>
<span class="nb">target_link_libraries</span><span class="p">(</span><span class="s">Sample</span><span class="w"> </span><span class="s">PRIVATE</span><span class="w"> </span><span class="s">OptimaV2::Runtime</span><span class="p">)</span>
</code></pre></div></p>
</div>
<div class="tabbed-block">
<p>Create new folder with preferred name and add a file named <code>sample.py</code> in the folder.</p>
<p>Add code below in <code>sample.py</code>.
<div class="highlight"><pre><span></span><code><span class="kn">import</span> <span class="nn">optima_v2.runtime</span> <span class="k">as</span> <span class="nn">rt</span>

<span class="c1"># TODO: Write your own code</span>
</code></pre></div></p>
</div>
</div>
</div>
<h2 id="create-the-context">Create the context<a class="headerlink" href="#create-the-context" title="Permanent link">&para;</a></h2>
<div class="tabbed-set tabbed-alternate" data-tabs="2:2"><input checked="checked" id="__tabbed_2_1" name="__tabbed_2" type="radio" /><input id="__tabbed_2_2" name="__tabbed_2" type="radio" /><div class="tabbed-labels"><label for="__tabbed_2_1">C++</label><label for="__tabbed_2_2">Python</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p>Declare a variable with type <a href="../../runtime/cpp/classes/context/"><code>rt::Context</code></a>. It manages resources like extensions, allocated during inferences, etc.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>All codes are written in <code>main</code> function if not explicitly mentioned.</p>
</div>
<div class="highlight"><pre><span></span><code><span class="k">auto</span><span class="w"> </span><span class="n">Context</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">rt</span><span class="o">::</span><span class="n">Context</span><span class="p">();</span>
</code></pre></div>
<p>Additional options for initializing <a href="../../runtime/cpp/classes/context/"><code>rt::Context</code></a> can be given by <a href="../../runtime/cpp/structs/context_options/"><code>rt::ContextOptions</code></a> object. If you want to initialize the context with options, refer the code below or <a href="../../runtime/cpp/structs/context_options/">the reference</a>.</p>
<div class="highlight"><pre><span></span><code><span class="k">auto</span><span class="w"> </span><span class="n">Options</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">rt</span><span class="o">::</span><span class="n">ContextOptions</span><span class="p">();</span>

<span class="n">Options</span><span class="p">.</span><span class="n">LogLevel</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">rt</span><span class="o">::</span><span class="n">LogLevel</span><span class="o">::</span><span class="n">Verbose</span><span class="p">;</span><span class="w"> </span><span class="c1">// setup verbosity of logger.</span>
<span class="n">Options</span><span class="p">.</span><span class="n">LogPath</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">filesystem</span><span class="o">::</span><span class="n">path</span><span class="p">(</span><span class="s">&quot;runtime.log&quot;</span><span class="p">);</span><span class="w"> </span><span class="c1">// set file path of log. default is stdout.</span>

<span class="k">auto</span><span class="w"> </span><span class="n">Context</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">rt</span><span class="o">::</span><span class="n">Context</span><span class="p">(</span><span class="n">Options</span><span class="p">);</span>
</code></pre></div>
<p>By default, the runtime loads extensions that are installed with the runtime. If you supplied extra extension and that is not in the path where the runtime installed, you can load it this way:</p>
<div class="highlight"><pre><span></span><code><span class="n">Context</span><span class="p">.</span><span class="n">loadExtension</span><span class="p">(</span><span class="s">&quot;path/to/extension&quot;</span><span class="p">);</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>Declare a variable with type <a href="../../runtime/python/classes/context/"><code>rt.Context</code></a>. It manages resources like extensions, allocated during inferences, etc.</p>
<div class="highlight"><pre><span></span><code><span class="n">context</span> <span class="o">=</span> <span class="n">rt</span><span class="o">.</span><span class="n">Context</span><span class="p">()</span>
</code></pre></div>
<p>Additional options for initializing <a href="../../runtime/cpp/classes/context/"><code>rt.Context</code></a> can be given by keyword arguments. <code>verbosity</code> argument set loglevel for internal logger and <code>log_path</code> argument set log path  If you want to initialize the context with options, refer the code below or <a href="../../runtime/python/classes/context/#initializer">the reference</a>.</p>
<div class="highlight"><pre><span></span><code><span class="n">context</span> <span class="o">=</span> <span class="n">rt</span><span class="o">.</span><span class="n">Context</span><span class="p">(</span><span class="n">verbosity</span><span class="o">=</span><span class="n">rt</span><span class="o">.</span><span class="n">LogLevel</span><span class="o">.</span><span class="n">Verbose</span><span class="p">,</span> <span class="n">log_path</span><span class="o">=</span><span class="s2">&quot;runtime.log&quot;</span><span class="p">)</span>
</code></pre></div>
<p>By default, the runtime loads extensions that are installed with the runtime. If you supplied extra extension and that is not in the path where the runtime installed, you can load it this way:</p>
<div class="highlight"><pre><span></span><code><span class="n">context</span><span class="p">.</span><span class="n">load_extension</span><span class="p">(</span><span class="s">&quot;path/to/extension&quot;</span><span class="p">)</span>
</code></pre></div>
</div>
</div>
</div>
<h2 id="load-the-model">Load the model<a class="headerlink" href="#load-the-model" title="Permanent link">&para;</a></h2>
<div class="tabbed-set tabbed-alternate" data-tabs="3:2"><input checked="checked" id="__tabbed_3_1" name="__tabbed_3" type="radio" /><input id="__tabbed_3_2" name="__tabbed_3" type="radio" /><div class="tabbed-labels"><label for="__tabbed_3_1">C++</label><label for="__tabbed_3_2">Python</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p>Loading a model is simple; just one line of code.</p>
<div class="highlight"><pre><span></span><code><span class="k">auto</span><span class="w"> </span><span class="n">Model</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Context</span><span class="p">.</span><span class="n">loadModel</span><span class="p">(</span><span class="s">&quot;path/to/model&quot;</span><span class="p">,</span><span class="w"> </span><span class="nb">false</span><span class="p">);</span>
</code></pre></div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>OptimaV2-generated model output is a folder.</p>
</div>
<p>To get information of input and output tensors, see the code below.</p>
<div class="highlight"><pre><span></span><code><span class="c1">// Gather all input tensor information</span>
<span class="k">auto</span><span class="w"> </span><span class="n">InputCount</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Model</span><span class="p">.</span><span class="n">getInputTensorCount</span><span class="p">();</span>
<span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="k">auto</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">InputCount</span><span class="p">;</span><span class="w"> </span><span class="o">++</span><span class="n">i</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">auto</span><span class="w"> </span><span class="o">&amp;</span><span class="n">Info</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Model</span><span class="p">.</span><span class="n">getInputTensorInfo</span><span class="p">(</span><span class="n">i</span><span class="p">);</span>
<span class="w">    </span><span class="c1">// Do something with Info</span>
<span class="p">}</span>

<span class="c1">// Get input tensor info with index</span>
<span class="k">auto</span><span class="w"> </span><span class="o">&amp;</span><span class="n">Info</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Model</span><span class="p">.</span><span class="n">getInputTensorInfo</span><span class="p">(</span><span class="n">i</span><span class="p">);</span>

<span class="c1">// ... or with name</span>
<span class="k">auto</span><span class="w"> </span><span class="o">&amp;</span><span class="n">Info</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Model</span><span class="p">.</span><span class="n">getInputTensorInfo</span><span class="p">(</span><span class="s">&quot;input_1&quot;</span><span class="p">);</span>

<span class="c1">// To get output tensor information, use getOutputTensor* series methods rather than getInputTensor* series methods.</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>Loading a model is simple; just one line of code.</p>
<div class="highlight"><pre><span></span><code><span class="n">model</span> <span class="o">=</span> <span class="n">context</span><span class="o">.</span><span class="n">load_model</span><span class="p">(</span><span class="s2">&quot;sample_model&quot;</span><span class="p">)</span>
</code></pre></div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>OptimaV2-generated model output is a folder.</p>
</div>
<p>To get information of input and output tensors, see the code below.</p>
<div class="highlight"><pre><span></span><code><span class="c1"># Gather all input tensor information</span>
<span class="k">for</span> <span class="n">info</span> <span class="ow">in</span> <span class="n">model</span><span class="o">.</span><span class="n">input_tensor_info</span><span class="p">:</span>
    <span class="c1"># do something with info</span>
    <span class="k">pass</span>

<span class="c1"># Get input tensor info with index</span>
<span class="n">info</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">get_input_tensor_info</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>

<span class="c1"># ... or with name</span>
<span class="n">info</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">get_input_tensor_info</span><span class="p">(</span><span class="s2">&quot;input_1&quot;</span><span class="p">)</span>

<span class="c1"># To get output tensor information, use get_output_tensor* series methods rather than get_input_tensor* series methods.</span>
</code></pre></div>
</div>
</div>
</div>
<h2 id="create-the-request">Create the request<a class="headerlink" href="#create-the-request" title="Permanent link">&para;</a></h2>
<div class="tabbed-set tabbed-alternate" data-tabs="4:2"><input checked="checked" id="__tabbed_4_1" name="__tabbed_4" type="radio" /><input id="__tabbed_4_2" name="__tabbed_4" type="radio" /><div class="tabbed-labels"><label for="__tabbed_4_1">C++</label><label for="__tabbed_4_2">Python</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p>Create a <a href="../../runtime/cpp/classes/infer_request/"><code>rt::InferRequest</code></a> object. It represents single inference and indepenedent between objects. So multiple <a href="../../runtime/cpp/classes/infer_request/"><code>rt::InferRequest</code></a> objects can be created on single model and run those asynchonously to achieve maximum throughput.</p>
<div class="highlight"><pre><span></span><code><span class="k">auto</span><span class="w"> </span><span class="n">Req</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Model</span><span class="p">.</span><span class="n">createRequest</span><span class="p">();</span>

<span class="c1">// To make more than one requests, you can do like this:</span>
<span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">rt</span><span class="o">::</span><span class="n">InferRequest</span><span class="o">&gt;</span><span class="w"> </span><span class="n">Reqs</span><span class="p">;</span>
<span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="k">auto</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">4</span><span class="p">;</span><span class="w"> </span><span class="o">++</span><span class="n">i</span><span class="p">)</span>
<span class="w">    </span><span class="n">Reqs</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">Model</span><span class="p">.</span><span class="n">createRequest</span><span class="p">());</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>Create a <a href="../../runtime/python/classes/infer_request/"><code>rt.InferRequest</code></a> object. It represents single inference and indepenedent between objects. So multiple <a href="../../runtime/python/classes/infer_request/"><code>rt.InferRequest</code></a> objects can be created on single model and run those asynchonously to achieve maximum throughput.</p>
<div class="highlight"><pre><span></span><code><span class="n">req</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">create_request</span><span class="p">()</span>

<span class="c1"># To make more than one requests, you can do like this:</span>
<span class="n">reqs</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">4</span><span class="p">):</span>
    <span class="n">reqs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">create_request</span><span class="p">())</span>
</code></pre></div>
</div>
</div>
</div>
<h2 id="set-input-tensors">Set input tensors<a class="headerlink" href="#set-input-tensors" title="Permanent link">&para;</a></h2>
<div class="tabbed-set tabbed-alternate" data-tabs="5:2"><input checked="checked" id="__tabbed_5_1" name="__tabbed_5" type="radio" /><input id="__tabbed_5_2" name="__tabbed_5" type="radio" /><div class="tabbed-labels"><label for="__tabbed_5_1">C++</label><label for="__tabbed_5_2">Python</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p>Because the device manages tensor memory, tensors cannot be created by user. So users should use <a href="../../runtime/cpp/classes/infer_request/#function-getinputtensor"><code>getInputTensor(...)</code></a> or <a href="../../runtime/cpp/classes/infer_request/#function-getoutputtensor"><code>getOutputTensor(...)</code></a> functions that are provided by <a href="../../runtime/cpp/classes/infer_request/"><code>rt::InferRequest</code></a> and copy datas using methods in <a href="../../runtime/cpp/classes/tensor/"><code>rt::Tensor</code></a>.</p>
<p>To give input tensor data for the model, refer the code below:</p>
<div class="highlight"><pre><span></span><code><span class="c1">// To get all input tensors, use getInputTensors() method.</span>
<span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="k">auto</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="n">Tensor</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Req</span><span class="p">.</span><span class="n">getInputTensors</span><span class="p">())</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// use copyFrom() method to do simple copy from buffer to tensor.</span>
<span class="w">    </span><span class="n">Tensor</span><span class="p">.</span><span class="n">copyFrom</span><span class="p">(</span><span class="n">InputBuffer</span><span class="p">,</span><span class="w"> </span><span class="n">InputElementCount</span><span class="p">);</span>

<span class="w">    </span><span class="c1">// If you access device memory directly, use getBuffer() method.</span>
<span class="w">    </span><span class="k">auto</span><span class="w"> </span><span class="n">Buffer</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Tensor</span><span class="p">.</span><span class="n">getBuffer</span><span class="p">();</span>
<span class="w">    </span><span class="k">auto</span><span class="w"> </span><span class="o">*</span><span class="n">Ptr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Buffer</span><span class="p">.</span><span class="n">data</span><span class="p">();</span>

<span class="w">    </span><span class="c1">// Do something with Ptr</span>
<span class="p">}</span>

<span class="c1">// To get tensor by index use getInputTensor() method.</span>
<span class="k">auto</span><span class="w"> </span><span class="n">Tensor</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Req</span><span class="p">.</span><span class="n">getInputTensor</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
<span class="c1">// String is allowed too.</span>
<span class="k">auto</span><span class="w"> </span><span class="n">Tensor</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Req</span><span class="p">.</span><span class="n">getInputTensor</span><span class="p">(</span><span class="s">&quot;input_1&quot;</span><span class="p">);</span>

<span class="c1">// The way to access data is same with above.</span>
<span class="n">Tensor</span><span class="p">.</span><span class="n">copyFrom</span><span class="p">(...);</span>
</code></pre></div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>a variable named <code>Buffer</code> is a RTTI object typed <a href="../../runtime/cpp/classes/buffer_holder/"><code>rt::BufferHolder</code></a> which is acquire device memory when use it and release the memory when reaches out of its scope.
So it may cause undefined behavior copying or moving value of <a href="../../runtime/cpp/classes/buffer_holder/"><code>rt::BufferHolder</code></a> class.
It is recommended that save <a href="../../runtime/cpp/classes/tensor/"><code>rt::Tensor</code></a> object and use <a href="../../runtime/cpp/classes/tensor/#function-getbuffer"><code>getBuffer()</code></a> method if you need to access device memory.</p>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p><a href="../../runtime/cpp/classes/tensor/"><code>rt::Tensor</code></a> in C++ API does not verify shape and/or type of input value. Use with caution.</p>
</div>
</div>
<div class="tabbed-block">
<p>Because the device manages tensor memory, tensors cannot be created by user. So users should use <a href="../../runtime/python/classes/tensor/"><code>rt.Tensor</code></a> objects that are provided by <a href="../../runtime/python/classes/infer_request/"><code>rt.InferRequest</code></a> and copy datas using methods in <a href="../../runtime/python/classes/tensor/"><code>rt.Tensor</code></a>.</p>
<p>To give input tensor data for the model, refer the code below:</p>
<div class="highlight"><pre><span></span><code><span class="c1"># To get all input tensors, use input_tensors property.</span>
<span class="k">for</span> <span class="n">tensor</span> <span class="ow">in</span> <span class="n">req</span><span class="o">.</span><span class="n">input_tensors</span><span class="p">:</span>
    <span class="n">arr</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>

    <span class="c1"># use copy_from() method to input data</span>
    <span class="n">tensor</span><span class="o">.</span><span class="n">copy_from</span><span class="p">(</span><span class="n">arr</span><span class="p">)</span>

<span class="c1"># To get tensor by index use get_input_tensor() method.</span>
<span class="n">tensor</span> <span class="o">=</span> <span class="n">req</span><span class="o">.</span><span class="n">get_input_tensor</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="c1"># String is allowed too.</span>
<span class="n">tensor</span> <span class="o">=</span> <span class="n">req</span><span class="o">.</span><span class="n">get_input_tensor</span><span class="p">(</span><span class="s2">&quot;input_1&quot;</span><span class="p">)</span>

<span class="c1"># use set_inputs() method to input datas at once.</span>
<span class="n">inputs</span> <span class="o">=</span> <span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">rand</span><span class="p">(</span><span class="o">...</span><span class="p">)</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="o">...</span><span class="p">)]</span>
<span class="n">req</span><span class="o">.</span><span class="n">set_inputs</span><span class="p">(</span><span class="n">inputs</span><span class="p">)</span>

<span class="c1"># dictionary form is also allowed.</span>
<span class="n">req</span><span class="o">.</span><span class="n">set_inputs</span><span class="p">({</span>
    <span class="s2">&quot;input_1&quot;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">rand</span><span class="p">(</span><span class="o">...</span><span class="p">),</span>
    <span class="s2">&quot;input_2&quot;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">rand</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>
<span class="p">})</span>
</code></pre></div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p><code>ndarray</code> in Numpy supports various form of array. In contrast, OptimaV2 Runtime only accepts row-major and contiguous array.
the runtime raises an error if inputs do not conform these conditions.</p>
</div>
</div>
</div>
</div>
<h2 id="run-inference">Run inference<a class="headerlink" href="#run-inference" title="Permanent link">&para;</a></h2>
<div class="tabbed-set tabbed-alternate" data-tabs="6:2"><input checked="checked" id="__tabbed_6_1" name="__tabbed_6" type="radio" /><input id="__tabbed_6_2" name="__tabbed_6" type="radio" /><div class="tabbed-labels"><label for="__tabbed_6_1">C++</label><label for="__tabbed_6_2">Python</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p>After you input datas for the model, you can run inference. All inferences are run asynchonously in the runtime. This means <a href="../../runtime/cpp/classes/infer_request/#function-infer"><code>infer()</code></a> method does not block the code.
You can use <a href="../../runtime/cpp/classes/infer_request/#function-wait"><code>wait()</code></a> method until the inference finish, but it is suggested that register the callback to improve throughput.</p>
<p>Running inference synchronously:</p>
<div class="highlight"><pre><span></span><code><span class="n">Req</span><span class="p">.</span><span class="n">infer</span><span class="p">();</span>
<span class="n">Req</span><span class="p">.</span><span class="n">wait</span><span class="p">();</span>

<span class="c1">// To set timeout for waiting, supply std::chrono::duration value</span>
<span class="c1">// when call the method.</span>
<span class="k">using</span><span class="w"> </span><span class="k">namespace</span><span class="w"> </span><span class="nn">std</span><span class="o">::</span><span class="nn">literals</span><span class="p">;</span><span class="w"> </span><span class="c1">// for ms literal</span>
<span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">Req</span><span class="p">.</span><span class="n">wait</span><span class="p">(</span><span class="mi">100</span><span class="n">ms</span><span class="p">))</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// infer() not finished before 100ms timeout</span>
<span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// infer() finished before 100ms timeout</span>
<span class="p">}</span>
</code></pre></div>
<p>Running inference asynchronously:</p>
<div class="highlight"><pre><span></span><code><span class="k">auto</span><span class="w"> </span><span class="o">&amp;</span><span class="n">Req</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Reqs</span><span class="p">[...];</span>
<span class="n">Req</span><span class="p">.</span><span class="n">setCallback</span><span class="p">([</span><span class="o">&amp;</span><span class="n">Req</span><span class="p">](</span><span class="n">std</span><span class="o">::</span><span class="n">exception_ptr</span><span class="w"> </span><span class="n">Error</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">Error</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="k">nullptr</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// error was thrown during inference</span>
<span class="w">        </span><span class="k">return</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="c1">// Do necessary jobs and run inference again.</span>
<span class="w">    </span><span class="n">Req</span><span class="p">.</span><span class="n">infer</span><span class="p">();</span><span class="w"> </span><span class="c1">// this is safe.</span>
<span class="p">});</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>After you input datas for the model, you can run inference. All inferences are run asynchonously in the runtime. This means <a href="../../runtime/python/classes/infer_request/#method-infer"><code>infer()</code></a> method does not block the code.
You can use <a href="../../runtime/python/classes/infer_request/#method-wait"><code>wait()</code></a> method until the inference finish, but it is suggested that register the callback to improve throughput.</p>
<p>Running inference synchronously:</p>
<div class="highlight"><pre><span></span><code><span class="n">req</span><span class="o">.</span><span class="n">infer</span><span class="p">()</span>
<span class="n">req</span><span class="o">.</span><span class="n">wait</span><span class="p">()</span>

<span class="c1"># To set timeout for waiting, supply integer value in milliseconds</span>
<span class="c1"># when call the method.</span>
<span class="k">if</span> <span class="n">req</span><span class="o">.</span><span class="n">wait</span><span class="p">(</span><span class="mi">100</span><span class="p">):</span>
    <span class="c1"># infer() not finished before timeout</span>
    <span class="k">pass</span>
<span class="k">else</span><span class="p">:</span>
    <span class="c1"># infer() finished before timeout</span>
    <span class="k">pass</span>
</code></pre></div>
<p>Running inference asynchronously:</p>
<div class="highlight"><pre><span></span><code><span class="n">req</span> <span class="o">=</span> <span class="o">...</span>

<span class="k">def</span> <span class="nf">callback</span><span class="p">(</span><span class="n">data</span><span class="p">):</span>
    <span class="c1"># This callback never be called when inference was failed.</span>

    <span class="c1"># Do necessary jobs and run inference again.</span>

    <span class="n">req</span><span class="o">.</span><span class="n">infer</span><span class="p">()</span>  <span class="c1"># this is safe.</span>

<span class="n">req</span><span class="o">.</span><span class="n">set_callback</span><span class="p">(</span><span class="n">callback</span><span class="p">,</span> <span class="o">...</span><span class="p">)</span>
<span class="n">req</span><span class="o">.</span><span class="n">infer</span><span class="p">()</span>
</code></pre></div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>It is known that there is memory leak due to circular reference when declare <a href="../../runtime/python/classes/context/"><code>rt.Context</code></a>, <a href="../../runtime/cpp/classes/model/"><code>rt.Model</code></a> and/or <a href="../../runtime/python/classes/infer_request/"><code>rt.InferRequest</code></a> objects in global scope and refer any of those in the callback.
You should avoid declare these objects in global scope to prevent these problem.</p>
</div>
</div>
</div>
</div>
<h2 id="get-output-tensors">Get output tensors<a class="headerlink" href="#get-output-tensors" title="Permanent link">&para;</a></h2>
<div class="tabbed-set tabbed-alternate" data-tabs="7:2"><input checked="checked" id="__tabbed_7_1" name="__tabbed_7" type="radio" /><input id="__tabbed_7_2" name="__tabbed_7" type="radio" /><div class="tabbed-labels"><label for="__tabbed_7_1">C++</label><label for="__tabbed_7_2">Python</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p>When the inference is finished successfully, you can read output tensor.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>You can get output tensor before finish the inference, even before run the inference. But it is not expected usage and it may cause undefined behavior. It is not recommended.</p>
</div>
<p>To get output tensors, refer the code below:</p>
<div class="highlight"><pre><span></span><code><span class="c1">// To get all output tensors, use getOutputTensors() method.</span>
<span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="k">auto</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="n">Tensor</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Req</span><span class="p">.</span><span class="n">getOutputTensors</span><span class="p">())</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// use copyTo() to simple copy from tensor to buffer.</span>
<span class="w">    </span><span class="n">Tensor</span><span class="p">.</span><span class="n">copyTo</span><span class="p">(</span><span class="n">OutputBuffer</span><span class="p">,</span><span class="w"> </span><span class="n">OutputElementCount</span><span class="p">);</span>

<span class="w">    </span><span class="c1">// If you want to access device memory directly, use getBuffer() mehtod.</span>
<span class="w">    </span><span class="k">auto</span><span class="w"> </span><span class="n">Buffer</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Tensor</span><span class="p">.</span><span class="n">getBuffer</span><span class="p">();</span>
<span class="w">    </span><span class="k">auto</span><span class="w"> </span><span class="o">*</span><span class="n">Ptr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Buffer</span><span class="p">.</span><span class="n">data</span><span class="p">();</span>

<span class="w">    </span><span class="c1">// Do something with Ptr</span>
<span class="p">}</span>

<span class="c1">// To get tensor by index, use getOutputTensor() method.</span>
<span class="k">auto</span><span class="w"> </span><span class="n">Tensor</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Req</span><span class="p">.</span><span class="n">getOutputTensor</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
<span class="c1">// String is allowed too.</span>
<span class="k">auto</span><span class="w"> </span><span class="n">Tensor</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Req</span><span class="p">.</span><span class="n">getOutputTensor</span><span class="p">(</span><span class="s">&quot;output&quot;</span><span class="p">);</span>

<span class="c1">// The way to access data is same with above.</span>
<span class="n">Tensor</span><span class="p">.</span><span class="n">copyTo</span><span class="p">(...);</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>When the inference is finished successfully, you can read output tensor.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>You can get output tensor before finish the inference, even before run the inference. But it is not expected usage and it may cause undefined behavior. It is not recommended.</p>
</div>
<p>To get output tensors, refer the code below:</p>
<div class="highlight"><pre><span></span><code><span class="c1"># To get all output tensors, use output_tensors property.</span>
<span class="k">for</span> <span class="n">tensor</span> <span class="ow">in</span> <span class="n">req</span><span class="o">.</span><span class="n">output_tensors</span><span class="p">:</span>
    <span class="n">arr</span> <span class="o">=</span> <span class="n">tensor</span><span class="o">.</span><span class="n">to_numpy</span><span class="p">()</span>

<span class="c1"># To get tensor by index, use get_output_tensor() method</span>
<span class="n">tensor</span> <span class="o">=</span> <span class="n">req</span><span class="o">.</span><span class="n">get_output_tensor</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="c1"># String is allowed too.</span>
<span class="n">tensor</span> <span class="o">=</span> <span class="n">req</span><span class="o">.</span><span class="n">get_output_tensor</span><span class="p">(</span><span class="s2">&quot;output&quot;</span><span class="p">)</span>

<span class="c1"># you can get all outputs at once in list of numpy arrays.</span>
<span class="n">outputs</span> <span class="o">=</span> <span class="n">req</span><span class="o">.</span><span class="n">get_outputs</span><span class="p">()</span>
</code></pre></div>
</div>
</div>
</div>
<h2 id="get-profile-data">Get profile data<a class="headerlink" href="#get-profile-data" title="Permanent link">&para;</a></h2>
<div class="tabbed-set tabbed-alternate" data-tabs="8:2"><input checked="checked" id="__tabbed_8_1" name="__tabbed_8" type="radio" /><input id="__tabbed_8_2" name="__tabbed_8" type="radio" /><div class="tabbed-labels"><label for="__tabbed_8_1">C++</label><label for="__tabbed_8_2">Python</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p>After running inference, you can get profile data gathered while running inference.
You can use this information to find out problems like which part is bottleneck for optimizing the model.</p>
<p>OptimaV2 Runtime provides these kinds of profile data below:</p>
<ul>
<li><code>ModelInit</code>: Represents taken time during load the model.</li>
<li><code>SubgraphInit</code>: Represents taken time during load the subgraph which is partal graph of the model.</li>
<li><code>RequestInit</code>: Represents taken time during create and initialize <a href="../../runtime/cpp/classes/infer_request/"><code>rt::InferRequest</code></a> object.</li>
<li><code>TransferFromInput</code>: Represents taken time during transfer data from input tensor to device memory.</li>
<li><code>TransferToOutput</code>: Represents taken time duing transfer data from device memory to output tensor.</li>
<li><code>LayerExecute</code>: Represents taken time during execute single layer(kernel).</li>
<li><code>Wait</code>: Represents taken time to wait execute the layer or the subgraph. (Waiting in the queue to run or waiting other layers and/or subgraphs to be finished)</li>
<li><code>BufferCopy</code>: Represents taken time to copy buffer between different devices.</li>
<li><code>ModelExecute</code>: Represents taken time to run entire model. (<code>LayerExecute</code> + <code>Wait</code> + <code>BufferCopy</code>)</li>
<li><code>SubgraphExecute</code>: Represents taken time to run single subgraph. (<code>LayerExecute</code> + <code>Wait</code>)</li>
</ul>
<p>To get profile data, refer the code below:</p>
<div class="highlight"><pre><span></span><code><span class="k">auto</span><span class="w"> </span><span class="n">Datas</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Req</span><span class="p">.</span><span class="n">getProfileData</span><span class="p">();</span>

<span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="k">auto</span><span class="w"> </span><span class="o">&amp;</span><span class="n">Data</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Datas</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// &lt;OptimaV2/Runtime/Utils/StreamHelper.h&gt; required to print in std::cout.</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="n">Data</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>We`ll introduce convenience feature for statistics and plotting graph in near future.</p>
</div>
</div>
<div class="tabbed-block">
<p>After running inference, you can get profile data gathered while running inference.
You can use this information to find out problems like which part is bottleneck for optimizing the model.</p>
<p>OptimaV2 Runtime provides these kinds of profile data below:</p>
<ul>
<li><code>ModelInit</code>: Represents taken time during load the model.</li>
<li><code>SubgraphInit</code>: Represents taken time during load the subgraph which is partal graph of the model.</li>
<li><code>RequestInit</code>: Represents taken time during create and initialize <a href="../../runtime/python/classes/infer_request/"><code>rt.InferRequest</code></a> object.</li>
<li><code>TransferFromInput</code>: Represents taken time during transfer data from input tensor to device memory.</li>
<li><code>TransferToOutput</code>: Represents taken time duing transfer data from device memory to output tensor.</li>
<li><code>LayerExecute</code>: Represents taken time during execute single layer(kernel).</li>
<li><code>Wait</code>: Represents taken time to wait execute the layer or the subgraph. (Waiting in the queue to run or waiting other layers and/or subgraphs to be finished)</li>
<li><code>BufferCopy</code>: Represents taken time to copy buffer between different devices.</li>
<li><code>ModelExecute</code>: Represents taken time to run entire model. (<code>LayerExecute</code> + <code>Wait</code> + <code>BufferCopy</code>)</li>
<li><code>SubgraphExecute</code>: Represents taken time to run single subgraph. (<code>LayerExecute</code> + <code>Wait</code>)</li>
</ul>
<p>To get profile data, refer the code below:</p>
<div class="highlight"><pre><span></span><code><span class="k">for</span> <span class="n">data</span> <span class="ow">in</span> <span class="n">req</span><span class="o">.</span><span class="n">profile_data</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
</code></pre></div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>We`ll introduce convenience feature for statistics and plotting graph in near future.</p>
</div>
</div>
</div>
</div>





                
              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var tab,labels=set.querySelector(".tabbed-labels");for(tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["content.tabs.link"], "search": "../../assets/javascripts/workers/search.208ed371.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.b78d2936.min.js"></script>
      
    
  </body>
</html>